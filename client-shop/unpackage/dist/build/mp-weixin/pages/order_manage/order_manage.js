(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order_manage/order_manage"],{"2fe7":function(t,n,o){"use strict";(function(t,e){var a=o("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=a(o("c297")),i=a(o("3574")),u=a(o("a5fb")),r=a(o("622e")),d={components:{JiangqieNoData:function(){o.e("components/nodata/nodata").then(function(){return resolve(o("7a2e"))}.bind(null,o)).catch(o.oe)}},data:function(){return{cur_tab:"all",all_count:0,create_count:0,pay_count:0,confirm_count:0,cancel_count:0,orders:[],loadMore:"more",loaded:!1}},onLoad:function(t){t.tab&&(this.cur_tab=t.tab)},onShow:function(){this.refresh(!0)},onReachBottom:function(){"more"==this.loadMore&&this.loadOrders()},onPullDownRefresh:function(){this.refresh()},onShareAppMessage:function(){return{title:getApp().globalData.appDesc+"_"+getApp().globalData.appName,path:"pages/index/index"}},methods:{clickLink:function(t){c.default.openLink(t)},clickTab:function(t){this.cur_tab=t,this.orders=[],this.loadOrders()},clickConfirm:function(n){var o=this;t.showModal({title:"提示",content:"请在收到货物后再确认",success:function(t){t.confirm&&r.default.post(u.default.ZHUIGE_SHOP_ORDER_CONFIRM,{order_id:n.id}).then((function(t){0==t.code?(n.confirmtime=t.data.confirmtime,o.loadCount()):i.default.toast(t.msg)}),(function(t){console.log(t)}))}})},clickCancel:function(n){var o=this;t.showModal({title:"提示",content:"确定要取消订单吗？",success:function(t){t.confirm&&r.default.post(u.default.ZHUIGE_SHOP_ORDER_CANCEL,{order_id:n.id}).then((function(t){0==t.code?(n.canceltime=t.data.canceltime,o.loadCount()):i.default.toast(t.msg)}),(function(t){console.log(t)}))}})},clickDelete:function(n){var o=this;t.showModal({title:"提示",content:"确定要删除订单吗？",success:function(t){t.confirm&&r.default.post(u.default.ZHUIGE_SHOP_ORDER_DELETE,{order_id:n.id}).then((function(t){if(0==t.code){var e=[];o.orders.forEach((function(t,o){t.id!=n.id&&e.push(t)})),o.orders=e,o.loadCount()}else i.default.toast(t.msg)}),(function(t){console.log(t)}))}})},clickPay:function(t){r.default.post(u.default.ZHUIGE_SHOP_ORDER_PAY,{order_id:t.id}).then((function(n){if(0==n.code){var o=n.data.pay_params;e.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(n){i.default.toast("支付成功"),t.paytime=!0},fail:function(t){i.default.toast("取消支付")}})}else i.default.toast(n.msg)}),(function(t){console.log(t)}))},refresh:function(){this.loadCount(),this.loadOrders(!0)},loadOrders:function(n){var o=this;"loading"!=this.loadMore&&(this.loadMore="loading",r.default.post(u.default.ZHUIGE_SHOP_ORDER_LIST,{offset:n?0:this.orders.length,filter:this.cur_tab}).then((function(e){o.orders=n?e.data.orders:o.orders.concat(e.data.orders),o.loadMore=e.data.more,o.loaded=!0,n&&t.stopPullDownRefresh()})))},loadCount:function(){var t=this;r.default.post(u.default.ZHUIGE_SHOP_ORDER_COUNT).then((function(n){t.all_count=n.data.all_count,t.create_count=n.data.create_count,t.pay_count=n.data.pay_count,t.confirm_count=n.data.confirm_count,t.cancel_count=n.data.cancel_count}))}}};n.default=d}).call(this,o("df3c")["default"],o("3223")["default"])},"32a9":function(t,n,o){"use strict";(function(t,n){var e=o("47a9");o("503f");e(o("3240"));var a=e(o("dca7"));t.__webpack_require_UNI_MP_PLUGIN__=o,n(a.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},6455:function(t,n,o){"use strict";o.d(n,"b",(function(){return a})),o.d(n,"c",(function(){return c})),o.d(n,"a",(function(){return e}));var e={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(o.bind(null,"42ec"))},uniLoadMore:function(){return o.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more").then(o.bind(null,"c065"))}},a=function(){var t=this,n=t.$createElement,o=(t._self._c,t.orders.length),e=o>0?t.__map(t.orders,(function(n,o){var e=t.__get_orig(n),a=n.goods_list&&n.goods_list.length>0;return{$orig:e,g1:a}})):null;t.$mp.data=Object.assign({},{$root:{g0:o,l0:e}})},c=[]},dca7:function(t,n,o){"use strict";o.r(n);var e=o("6455"),a=o("f9e5");for(var c in a)["default"].indexOf(c)<0&&function(t){o.d(n,t,(function(){return a[t]}))}(c);o("f80c");var i=o("828b"),u=Object(i["a"])(a["default"],e["b"],e["c"],!1,null,"532fa068",null,!1,e["a"],void 0);n["default"]=u.exports},f496:function(t,n,o){},f80c:function(t,n,o){"use strict";var e=o("f496"),a=o.n(e);a.a},f9e5:function(t,n,o){"use strict";o.r(n);var e=o("2fe7"),a=o.n(e);for(var c in e)["default"].indexOf(c)<0&&function(t){o.d(n,t,(function(){return e[t]}))}(c);n["default"]=a.a}},[["32a9","common/runtime","common/vendor"]]]);