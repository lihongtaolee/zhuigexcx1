(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bbs/forum/forum"],{2425:function(o,t,n){"use strict";n.r(t);var e=n("f9bf"),i=n.n(e);for(var u in e)["default"].indexOf(u)<0&&function(o){n.d(t,o,(function(){return e[o]}))}(u);t["default"]=i.a},7412:function(o,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return e}));var e={uniNavBar:function(){return n.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"a11e"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"ca98"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"6deb"))}},i=function(){var o=this,t=o.$createElement,n=(o._self._c,o.forum&&o.forum.users.length>0),e=o.forum&&o.forum.ad_custom&&o.forum.ad_custom.length>0,i=o.topics&&o.topics.length>0,u=o.topics&&o.topics.length>0,a=o.forum&&o.forum.ad_menu&&o.forum.ad_menu.length>0;o.$mp.data=Object.assign({},{$root:{g0:n,g1:e,g2:i,g3:u,g4:a}})},u=[]},"9d3d":function(o,t,n){"use strict";n.r(t);var e=n("7412"),i=n("2425");for(var u in i)["default"].indexOf(u)<0&&function(o){n.d(t,o,(function(){return i[o]}))}(u);n("a889");var a=n("828b"),r=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);t["default"]=r.exports},a889:function(o,t,n){"use strict";var e=n("ccd4"),i=n.n(e);i.a},ccd4:function(o,t,n){},f951:function(o,t,n){"use strict";(function(o,t){var e=n("47a9");n("0322");e(n("3240"));var i=e(n("9d3d"));o.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},f9bf:function(o,t,n){"use strict";(function(o){var e=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e(n("92bf")),u=e(n("59fc")),a=e(n("c52b")),r=e(n("6112")),s={components:{ZhuigeTopic:function(){n.e("components/zhuige-topic").then(function(){return resolve(n("6827"))}.bind(null,n)).catch(n.oe)},ZhuigeScrollUser:function(){n.e("components/zhuige-scroll-user").then(function(){return resolve(n("bbd5"))}.bind(null,n)).catch(n.oe)},ZhuigeScrollAd:function(){n.e("components/zhuige-scroll-ad").then(function(){return resolve(n("ea12"))}.bind(null,n)).catch(n.oe)},ZhuigeTab:function(){n.e("components/zhuige-tab").then(function(){return resolve(n("2fa7"))}.bind(null,n)).catch(n.oe)},ZhuigeNodata:function(){n.e("components/zhuige-nodata").then(function(){return resolve(n("cb68"))}.bind(null,n)).catch(n.oe)}},data:function(){return this.forum_id=void 0,this.reloadDetail=!1,{nav_opacity:0,statusBarHeight:0,show_notice:!1,forum:void 0,topics:[],loadMore:"more",loaded:!1,traffic_list:void 0}},computed:{title:function(){return this.forum?this.forum.name:"圈子"}},onLoad:function(t){t.id&&(t.forum_id=t.id),t.forum_id?(i.default.addShareScore(t.source),this.statusBarHeight=o.getSystemInfoSync().statusBarHeight,this.forum_id=t.forum_id,this.refresh(),o.$on("zhuige_event_user_join_forum",this.onSetReloadDetail),o.$on("zhuige_event_user_like",this.onUserLike)):o.reLaunch({url:"/pages/tabs/index/index"})},onUnload:function(){o.$off("zhuige_event_user_like",this.onUserLike),o.$off("zhuige_event_user_join_forum",this.onSetReloadDetail)},onShow:function(){this.reloadDetail&&(this.reloadDetail=!1,this.loadDetail())},onPageScroll:function(t){this.nav_opacity=(t.scrollTop>255?255:t.scrollTop)/255,t.scrollTop>20?o.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"}):o.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"})},onReachBottom:function(){"more"==this.loadMore&&this.loadTopics(!1)},onPullDownRefresh:function(){this.refresh()},onShareAppMessage:function(){return{title:this.forum.name+"-"+getApp().globalData.appName,path:i.default.addShareSource("pages/bbs/forum/forum?forum_id="+this.forum_id)}},onShareTimeline:function(){return{title:this.forum.name+"-"+getApp().globalData.appName}},methods:{onSetReloadDetail:function(o){this.reloadDetail=!0},onUserLike:function(o){this.topics&&this.topics.length>0&&this.topics.forEach((function(t){t.id==o.post_id&&(t.like_count=o.like_count)}))},refresh:function(){this.loadDetail(),this.loadTopics(!0)},clickBack:function(){i.default.navigateBack()},openLink:function(o){i.default.openLink(o)},clickNotice:function(){this.show_notice=!this.show_notice},clickJoinForum:function(){var t=this;r.default.post(a.default.URL("user","follow_forum"),{forum_id:this.forum_id,user:1}).then((function(n){0==n.code?(t.forum.is_follow=n.data.is_follow,t.forum.user_count=n.data.user_count,t.forum.users=n.data.users,o.$emit("zhuige_event_user_join_forum",{forum_id:t.forum_id,user_count:n.data.user_count}),t.reloadDetail=!1):u.default.toast(n.message)}),(function(o){console.log(o)}))},clickAdmin:function(){i.default.openLink("/pages/bbs_admin/list/list")},clickPost:function(){i.default.openLink("/pages/bbs/post/post?type=image&fid="+this.forum.id+"&fname="+this.forum.name)},clickLocation:function(){o.openLocation({name:this.forum.location.marker,address:this.forum.location.address,latitude:parseFloat(this.forum.location.latitude),longitude:parseFloat(this.forum.location.longitude),success:function(){console.log("success")}})},loadDetail:function(){var t=this;r.default.post(a.default.URL("bbs","forum_detail"),{forum_id:this.forum_id}).then((function(n){t.forum=n.data.forum,n.data.traffic_list&&(t.traffic_list=n.data.traffic_list),o.stopPullDownRefresh()}),(function(o){console.log(o)}))},loadTopics:function(o){var t,n=this,e={offset:o?0:this.topics.length};t=a.default.URL("bbs","topic_list_forum"),e.forum_id=this.forum_id,r.default.post(t,e).then((function(t){n.topics=o?t.data.topics:n.topics.concat(t.data.topics),n.loadMore=t.data.more,n.loaded=!0}),(function(o){console.log(o)}))}}};t.default=s}).call(this,n("df3c")["default"])}},[["f951","common/runtime","common/vendor"]]]);