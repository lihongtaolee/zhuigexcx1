(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bbs/forum-create/forum-create"],{"00c0":function(e,t,n){"use strict";n.r(t);var i=n("5933"),a=n("8027");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("175e");var r=n("828b"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=u.exports},"047e":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("1e94");i(n("3240"));var a=i(n("00c0"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"175e":function(e,t,n){"use strict";var i=n("feab"),a=n.n(i);a.a},5933:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"d68c"))}},a=function(){var e=this.$createElement,t=(this._self._c,this.catnames&&this.catnames.length>0);this.$mp.data=Object.assign({},{$root:{g0:t}})},o=[]},8027:function(e,t,n){"use strict";n.r(t);var i=n("b8f5"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},b8f5:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("435b")),o=i(n("85d8")),r=i(n("9a2d")),u=i(n("c118")),c={components:{},data:function(){return{logo:"",name:"",brief:"",cats:[],catnames:[],index:0,longitude:"",latitude:"",marker:"",address:"",agree:!1,licence:""}},onLoad:function(t){var n=this;a.default.addShareScore(t.source),u.default.post(r.default.URL("bbs","setting_forum_create_pre"),{},!0).then((function(t){if(0==t.code){n.licence=t.data.licence,n.cats=t.data.cats;var i=[];n.cats.forEach((function(e){i.push(e.name)})),n.catnames=i}else"require_mobile"==t.code?e.redirectTo({url:"/pages/user/login/login?type=mobile&tip=建圈"}):"require_avatar"==t.code?e.redirectTo({url:"/pages/user/verify/verify?tip=建圈"}):(o.default.error(t.message),setTimeout((function(){a.default.navigateBack()}),1500))}),(function(e){console.log(e)}))},methods:{clickLogo:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){var n=e.tempFilePaths[0];u.default.upload(r.default.URL("other","upload2"),n).then((function(e){t.logo=e.data}),(function(e){o.default.error(e)}))},fail:function(e){e.errMsg&&e.errMsg.indexOf("cancel")<0&&o.default.error(e.errMsg)}})},clickAddress:function(){var t=this,n={success:function(e){t.marker=e.name,t.address=e.address,t.longitude=e.longitude,t.latitude=e.latitude}};this.latitude&&(n.latitude=this.latitude),this.longitude&&(n.longitude=this.longitude),e.chooseLocation(n)},changeCategory:function(e){this.index=e.detail.value},clickCreate:function(){this.agree?u.default.post(r.default.URL("bbs","forum_create"),{logo:JSON.stringify(this.logo),name:this.name,brief:this.brief,cat_id:this.cats[this.index].id,latitude:this.latitude,longitude:this.longitude,marker:this.marker,address:this.address}).then((function(t){0==t.code?(o.default.toast("提交成功，请耐心等待审核"),setTimeout((function(){e.switchTab({url:"/pages/tabs/forum/forum"})}),1500)):"require_mobile"==t.code?a.default.openLink("/pages/user/login/login?type=mobile&tip=建圈"):"require_avatar"==t.code?a.default.openLink("/pages/user/verify/verify?tip=建圈"):o.default.error(t.message)}),(function(e){console.log(e)})):o.default.toast("需要同意圈子协议")},clickArgee:function(){this.agree=!this.agree},clickLicence:function(){a.default.openLink(this.licence)}}};t.default=c}).call(this,n("df3c")["default"])},feab:function(e,t,n){}},[["047e","common/runtime","common/vendor"]]]);