(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabs/index/index"],{"1e24":function(e,t,n){"use strict";n.r(t);var i=n("36c5"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"36c5":function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("7eb4")),o=i(n("ee10")),r=i(n("435b")),u=i(n("9a2d")),l=i(n("c118")),s={components:{ZhuigeSwiper:function(){n.e("components/zhuige-swiper").then(function(){return resolve(n("fcc3"))}.bind(null,n)).catch(n.oe)},ZhuigeIcons:function(){n.e("components/zhuige-icons").then(function(){return resolve(n("c641"))}.bind(null,n)).catch(n.oe)},zhuigeHeightPredict:function(){n.e("components/zhuige-height-predict").then(function(){return resolve(n("b945"))}.bind(null,n)).catch(n.oe)},ZhuigeSgztmkModule:function(){n.e("components/zhuige-sgztmk-module").then(function(){return resolve(n("7140"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLoading:!0,logo:void 0,style:"",slides:[],icons:[],heightData:this.getDefaultHeightData(),apiBaseUrl:"https://x.erquhealth.com/wp-json/zhuige/sgtool",sgztmkModules:[],isModulesLoading:!0}},onLoad:function(){this.refresh(),this.fetchUserHeightData()},onShow:function(){this.refresh();var t=e.getStorageSync("zhuige_xcx_user");t&&t.user_id?this.fetchUserHeightData():this.heightData=this.getDefaultHeightData()},methods:{openLink:function(e){r.default.openLink(e)},refresh:function(){this.loadSetting()},loadSetting:function(){var e=this;l.default.post(u.default.URL("setting","home")).then((function(t){e.logo=t.data.logo,e.slides=t.data.slides,e.icons=t.data.icons,t.data.style&&(e.style=t.data.style),e.fetchSgztmkModules(),e.isLoading=!1})).catch((function(t){e.isLoading=!1}))},getDefaultHeightData:function(){return{currentHeight:165,geneticHeight:175,targetHeight:180,probability:85,baobaoname:"演示宝宝",updateTime:""}},fetchUserHeightData:function(){var t=this;return(0,o.default)(a.default.mark((function n(){var i,o,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.getStorageSync("zhuige_xcx_user"),i&&i.user_id){n.next=5;break}return t.heightData=t.getDefaultHeightData(),t.isLoading=!1,n.abrupt("return");case 5:return n.prev=5,n.next=8,e.request({url:"".concat(t.apiBaseUrl,"/get_user_height_data"),method:"GET",data:{user_id:i.user_id},header:{"content-type":"application/json"}});case 8:o=n.sent,200===o.statusCode&&o.data&&0===o.data.code&&(r=o.data.data,r&&r.baobaoname&&r.current_height&&r.target_height&&r.prediction_probability?t.heightData={geneticHeight:Number(1===r.gender?r.boy_genetic_height:r.girl_genetic_height),currentHeight:Number(r.current_height),targetHeight:Number(r.target_height),probability:Number(r.prediction_probability),baobaoname:r.baobaoname,updateTime:r.create_time}:t.heightData=t.getDefaultHeightData()),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](5),e.showToast({title:"获取数据失败",icon:"none"}),t.heightData=t.getDefaultHeightData();case 16:return n.prev=16,t.isLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[5,12,16,19]])})))()},fetchSgztmkModules:function(){var t=this;return(0,o.default)(a.default.mark((function n(){var i,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isModulesLoading=!0,n.prev=1,n.next=4,l.default.post(u.default.URL("sgtool","get_sgztmk_modules"));case 4:if(i=n.sent,!i.data||!Array.isArray(i.data.modules)){n.next=12;break}return r=e.getStorageSync("zhuige_xcx_user"),n.next=9,Promise.all(i.data.modules.map(function(){var t=(0,o.default)(a.default.mark((function t(n){var i,o,u,l,s,c,d,g;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.left_module.value_api){t.next=14;break}if(i="60",!r||!r.user_id){t.next=13;break}return t.prev=3,o=n.left_module.value_api.replace("{user_id}",r.user_id),t.next=7,e.request({url:o,method:"GET",header:{"content-type":"application/json"}});case 7:u=t.sent,u.data&&200===u.data.code&&u.data.data&&(l=u.data.data,Array.isArray(l)&&l.length>0&&(s=l[l.length-1],c=o.split("?")[1],d=c.match(/fields=([^&]*)/),g=d?d[1]:null,g&&void 0!==s[g]&&(i=Number(s[g]).toFixed(1)))),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](3);case 13:n.left_module.value=i;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()));case 9:t.sgztmkModules=n.sent,n.next=13;break;case 12:t.sgztmkModules=[];case 13:n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](1),t.sgztmkModules=[];case 18:return n.prev=18,t.isModulesLoading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[1,15,18,21]])})))()}}};t.default=s}).call(this,n("df3c")["default"])},"87f1":function(e,t,n){"use strict";n.r(t);var i=n("cd54"),a=n("1e24");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("9502");var r=n("828b"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=u.exports},9502:function(e,t,n){"use strict";var i=n("bcd8"),a=n.n(i);a.a},bcd8:function(e,t,n){},becb:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("1e94");i(n("3240"));var a=i(n("87f1"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},cd54:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uniNavBar:function(){return n.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"1f4e"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"d68c"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.slides&&e.slides.length>0),i=e.icons&&e.icons.length>0,a=!e.isModulesLoading&&e.sgztmkModules&&e.sgztmkModules.length>0,o=a?e.__map(e.sgztmkModules,(function(t,n){var i=e.__get_orig(t),a={title:t.left_module.title,icon:t.icon,description:t.left_module.description,image:t.left_module.image,buttonText:t.left_module.button_text,link:t.left_module.link,value:t.left_module.value,bgColor:t.left_module.bg_color},o={title:t.right_top_module.title,description:t.right_top_module.description,image:t.right_top_module.image,buttonText:t.right_top_module.button_text,link:t.right_top_module.link,bgColor:t.right_top_module.bg_color},r={title:t.right_bottom_module.title,description:t.right_bottom_module.description,image:t.right_bottom_module.image,buttonText:t.right_bottom_module.button_text,link:t.right_bottom_module.link,bgColor:t.right_bottom_module.bg_color};return{$orig:i,a0:a,a1:o,a2:r}})):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:a,l0:o}})},o=[]}},[["becb","common/runtime","common/vendor"]]]);