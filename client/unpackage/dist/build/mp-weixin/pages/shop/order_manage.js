(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/order_manage"],{"6c17":function(t,o,e){},"727c":function(t,o,e){"use strict";e.r(o);var n=e("be17"),a=e.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(c);o["default"]=a.a},"9ecd":function(t,o,e){"use strict";var n=e("6c17"),a=e.n(n);a.a},a543:function(t,o,e){"use strict";e.r(o);var n=e("ae1a"),a=e("727c");for(var c in a)["default"].indexOf(c)<0&&function(t){e.d(o,t,(function(){return a[t]}))}(c);e("9ecd");var i=e("828b"),u=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,"8c2de162",null,!1,n["a"],void 0);o["default"]=u.exports},ae1a:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return a})),e.d(o,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},a=[]},be17:function(t,o,e){"use strict";(function(t,n){var a=e("47a9");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=a(e("85d8")),i=a(e("c118")),u=a(e("9a2d")),r={data:function(){return{cur_tab:"",orders:[],loadMore:"loading",loaded:!1,all_count:0,create_count:0,pay_count:0,confirm_count:0,cancel_count:0}},onLoad:function(){this.loadCount(),this.loadOrders(!0)},onPullDownRefresh:function(){this.refresh()},onReachBottom:function(){"more"===this.loadMore&&this.loadOrders(!1)},methods:{clickTab:function(t){this.cur_tab!==t&&(this.cur_tab=t,this.loadOrders(!0))},clickDetail:function(o){t.navigateTo({url:"/pages/shop/order_detail?order_id="+o.id})},clickCancel:function(o){var e=this;t.showModal({title:"提示",content:"确定要取消订单吗？",success:function(t){t.confirm&&i.default.post(u.default.ZHUIGE_SHOP_ORDER_CANCEL,{order_id:o.id}).then((function(t){0==t.code?(o.canceltime=t.data.canceltime,e.loadCount()):c.default.toast(t.msg)}),(function(t){console.log(t)}))}})},clickDelete:function(o){var e=this;t.showModal({title:"提示",content:"确定要删除订单吗？",success:function(t){t.confirm&&i.default.post(u.default.ZHUIGE_SHOP_ORDER_DELETE,{order_id:o.id}).then((function(t){if(0==t.code){var n=[];e.orders.forEach((function(t,e){t.id!=o.id&&n.push(t)})),e.orders=n,e.loadCount()}else c.default.toast(t.msg)}),(function(t){console.log(t)}))}})},clickPay:function(t){i.default.post(u.default.ZHUIGE_SHOP_ORDER_PAY,{order_id:t.id}).then((function(o){if(0==o.code){var e=o.data.pay_params;n.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign,success:function(o){c.default.toast("支付成功"),t.paytime=!0},fail:function(t){c.default.toast("取消支付")}})}else c.default.toast(o.msg)}),(function(t){console.log(t)}))},refresh:function(){this.loadCount(),this.loadOrders(!0)},loadOrders:function(o){var e=this;"loading"!=this.loadMore&&(this.loadMore="loading",i.default.post(u.default.ZHUIGE_SHOP_ORDER_LIST,{offset:o?0:this.orders.length,filter:this.cur_tab}).then((function(n){e.orders=o?n.data.orders:e.orders.concat(n.data.orders),e.loadMore=n.data.more,e.loaded=!0,o&&t.stopPullDownRefresh()})))},loadCount:function(){var t=this;i.default.post(u.default.ZHUIGE_SHOP_ORDER_COUNT).then((function(o){t.all_count=o.data.all_count,t.create_count=o.data.create_count,t.pay_count=o.data.pay_count,t.confirm_count=o.data.confirm_count,t.cancel_count=o.data.cancel_count}))}}};o.default=r}).call(this,e("df3c")["default"],e("3223")["default"])},c7f6:function(t,o,e){"use strict";(function(t,o){var n=e("47a9");e("1e94");n(e("3240"));var a=n(e("a543"));t.__webpack_require_UNI_MP_PLUGIN__=e,o(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])}},[["c7f6","common/runtime","common/vendor"]]]);