(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/index"],{"141b":function(t,o,e){"use strict";(function(t,o){var n=e("47a9");e("1e94");n(e("3240"));var a=n(e("c3a5"));t.__webpack_require_UNI_MP_PLUGIN__=e,o(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"35b1":function(t,o,e){"use strict";e.r(o);var n=e("e2df"),a=e.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(i);o["default"]=a.a},"5cfd":function(t,o,e){},9494:function(t,o,e){"use strict";var n=e("5cfd"),a=e.n(n);a.a},b701:function(t,o,e){"use strict";e.d(o,"b",(function(){return a})),e.d(o,"c",(function(){return i})),e.d(o,"a",(function(){return n}));var n={uniNavBar:function(){return e.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(e.bind(null,"1f4e"))},uniIcons:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(e.bind(null,"d68c"))},uniLoadMore:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(e.bind(null,"45ad"))}},a=function(){var t=this,o=t.$createElement,e=(t._self._c,t.slides&&t.slides.length>0),n=t.icon_navs&&t.icon_navs.length>0,a=t.home_rec?t.home_rec.posts&&t.home_rec.posts.length>0:null,i=t.goods_list.length;t.$mp.data=Object.assign({},{$root:{g0:e,g1:n,g2:a,g3:i}})},i=[]},c3a5:function(t,o,e){"use strict";e.r(o);var n=e("b701"),a=e("35b1");for(var i in a)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return a[t]}))}(i);e("9494");var r=e("828b"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);o["default"]=c.exports},e2df:function(t,o,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=n(e("7ca3")),i=n(e("462b")),r=n(e("435b")),c=(n(e("85d8")),n(e("9a2d"))),s=(n(e("c118")),e("8f59"));function l(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}var d={name:"ShopHome",components:{JiangqieNoData:function(){e.e("components/zhuige-nodata").then(function(){return resolve(e("5081"))}.bind(null,e)).catch(e.oe)}},data:function(){return this.share_title=void 0,this.share_thumb=void 0,{background:void 0,title:"",nav_color:"rgb(255, 255, 255)",nav_bgcolor:"rgba(255, 255, 255, 0)",slides:[],icon_navs:[],home_rec:void 0,cats:[],cat_id:void 0,goods_list:[],loadMore:"more",loaded:!1,pop_ad:void 0}},computed:function(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?l(Object(e),!0).forEach((function(o){(0,a.default)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}({},(0,s.mapGetters)(["getCartCount"])),onLoad:function(){this.loadSetting(),this.loadGoods()},onShow:function(){r.default.updateCartBadge(this.getCartCount)},onPageScroll:function(o){if(o.scrollTop>20){var e=(o.scrollTop-20)/255;if(e<=1){var n=255*(1-e);this.nav_color="rgb(".concat(n,", ").concat(n,", ").concat(n,")"),this.nav_bgcolor="rgba(255, 255, 255, ".concat(e,")"),this.title="商城"}else"rgb(255, 255, 255)"!=this.nav_color&&(this.nav_color="rgb(0, 0, 0)",this.nav_bgcolor="rgba(255, 255, 255, 1)");t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"})}else this.nav_color="rgb(255, 255, 255)",this.nav_bgcolor="rgba(255, 255, 255, 0)",this.title="",t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ffffff"})},onReachBottom:function(){"more"==this.loadMore&&this.loadGoods()},onPullDownRefresh:function(){this.refresh()},methods:{refresh:function(){this.loadSetting(),this.loaded=!1,this.goods_list=[],this.loadGoods()},clickLink:function(t){r.default.openLink(t)},clickTab:function(t){this.cat_id=t,this.loaded=!1,this.goods_list=[],this.loadGoods()},clickCategory:function(){t.navigateTo({url:"/pages/shop/category/category"})},loadSetting:function(){var o=this;t.request({url:c.default.URL("shop","setting"),success:function(e){if(e.data&&0===e.data.code){var n=e.data.data;o.background=n.background,o.share_title=n.home_title,o.share_thumb=n.thumb,o.slides=n.slides,o.icon_navs=n.icon_navs,o.home_rec=n.home_rec,o.cats=n.cats,o.cat_id=o.cats[0].id,o.pop_ad=r.default.getPopAd(n.pop_ad,i.default.ZHUIGE_INDEX_MAXAD_LAST_TIME)}t.stopPullDownRefresh()}})},loadGoods:function(){var o=this;if("loading"!=this.loadMore){this.loadMore="loading";var e={offset:this.goods_list.length};this.cat_id&&(e.cat_id=this.cat_id),t.request({url:c.default.URL("shop","goods/last"),data:e,success:function(t){t.data&&0===t.data.code&&(o.goods_list=o.goods_list.concat(t.data.data.list),o.loadMore=t.data.data.more,o.loaded=!0)}})}},clickPopAd:function(){t.setStorageSync(i.default.ZHUIGE_INDEX_MAXAD_LAST_TIME,(new Date).getTime()),r.default.openLink(this.pop_ad.link),this.pop_ad=!1},clickPopAdClose:function(){this.pop_ad=!1,t.setStorageSync(i.default.ZHUIGE_INDEX_MAXAD_LAST_TIME,(new Date).getTime())}}};o.default=d}).call(this,e("df3c")["default"])}},[["141b","common/runtime","common/vendor"]]]);