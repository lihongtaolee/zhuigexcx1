(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/order_confirm"],{"00e6":function(e,t,o){"use strict";(function(e,r){var n=o("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(o("7ca3")),a=n(o("85d8")),i=n(o("c118")),d=n(o("9a2d")),c=o("8f59"),u=n(o("3563"));function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,s.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var g={data:function(){return{address:!1,goods_list:[],remark:""}},computed:l(l({},(0,c.mapGetters)(["getCheckBuyGoodsIds","getCheckBuyCount","getCheckBuyAmount"])),{},{goodsCount:function(){var e=0;return this.goods_list.forEach((function(t){e+=t.count})),e},goodsAmount:function(){var e=0;return this.goods_list.forEach((function(t){t.price&&t.count&&(e+=parseFloat((t.price*t.count).toFixed(2)))})),e}}),onLoad:function(t){var o=this;this.address=e.getStorageSync("zhuige_shop_address");var r="";r=t.goods_id?t.goods_id:this.getCheckBuyGoodsIds.join(","),0!=r.length?i.default.post(d.default.ZHUIGE_SHOP_GOODS_CART,{goods_ids:r}).then((function(e){var r=e.data.list;if(t.goods_id)r[0].count=1;else for(var n=0;n<r.length;n++)for(var s=0;s<u.default.state.cart.length;s++)u.default.state.cart[s].id==r[n].id&&(r[n].count=u.default.state.cart[s].count);o.goods_list=r})):e.reLaunch("/pages/index/index")},methods:{clickAddress:function(){var t=this;e.chooseAddress({success:function(o){t.address={addressee:o.userName,mobile:o.telNumber,address:o.provinceName+o.cityName+o.countyName+o.detailInfo},e.setStorageSync("zhuige_shop_address",t.address)},fail:function(e){e.errMsg&&e.errMsg.indexOf("cancel")<0&&a.default.error(e.errMsg)}})},clickOrderSubmit:function(){if(this.address)if(this.goods_list&&0!=this.goods_list.length){var t=[];this.goods_list.forEach((function(e){t.push({id:e.id,count:e.count})})),i.default.post(d.default.ZHUIGE_SHOP_ORDER_CREATE,{addressee:this.address.addressee,mobile:this.address.mobile,address:this.address.address,goods_list:JSON.stringify(t),remark:this.remark}).then((function(t){if(0==t.code){u.default.commit("cartGoodsBuyCheck");var o=t.data.pay_params;r.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(){a.default.toast("支付成功"),e.redirectTo({url:"/pages/shop/order_detail?order_id="+t.data.order_id})},fail:function(e){a.default.toast("支付失败"),console.log(e)}})}else a.default.toast(t.msg)}))}else a.default.toast("请选择商品");else a.default.toast("请选择地址")}}};t.default=g}).call(this,o("df3c")["default"],o("3223")["default"])},"0396":function(e,t,o){"use strict";o.r(t);var r=o("00e6"),n=o.n(r);for(var s in r)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(s);t["default"]=n.a},"89fd":function(e,t,o){"use strict";(function(e,t){var r=o("47a9");o("1e94");r(o("3240"));var n=r(o("a06d"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"8a86":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return r}));var r={uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(o.bind(null,"d68c"))}},n=function(){var e=this.$createElement;this._self._c},s=[]},a06d:function(e,t,o){"use strict";o.r(t);var r=o("8a86"),n=o("0396");for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);var a=o("828b"),i=Object(a["a"])(n["default"],r["b"],r["c"],!1,null,"7e1097a0",null,!1,r["a"],void 0);t["default"]=i.exports}},[["89fd","common/runtime","common/vendor"]]]);